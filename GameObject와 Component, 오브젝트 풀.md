# GameObject와 Component, 오브젝트 풀

## GetComponent\<T>

GameObject가 갖고있는 Component를 가져오는 메서드. 해당 타입의 컴포넌트가 없었다면 null을 반환한다.

* GetComponents\<T> : 지정한 타입의 모든 컴포넌트를 가져온다. Collider과 같이 한 GameObject가 여러개를 가질 법한 컴포넌트에 사용하는 경우가 있다.
* GetComponentsInChildren\<T> : 해당 게임 오브젝트와 그 모든 자식을 순회해서 해당 타입의 컴포넌트를 T[]로 반환.
* GetComponentInChildren\<T>
* GetComponentInParent\<T>
* GetComponentsInParent\<T>

## GameObject의 계층구조

GameObject는 다른 GameObject를 부모 또는 자식으로 가질 수 있다. 정확히는 게임 오브젝트가 반드시 갖는 transform 에서 parent와 GetChild()를 찾아볼 수 있다.

클래스의 상속 관계가 아닌, 자료구조의 node와 같은 계층 구조의 부모-자식 관계임에 유의하자.

자식 GameObject의 transform은 월드에서의 위치가 아닌, 부모 GameObject의 transform을 기준으로 한 위치이다.

## 프리팹 Prefab

임의의 GameObject와 Component의 조합 설계도이다. 특정 조합법을 저장해두는 것으로 컴포넌트 패턴을 사용하면서 재사용을 유연하게 하는 것이다.

## 오브젝트의 생성과 파괴

Instantiate(GameObject) 메서드로 원본 GameObject를 복사해서 생성할 수 있다. 매개변수로 GameObject에 부착된 컴포넌트를 대신 넣는 것으로 생성된 GameObject의 해당 컴포넌트를 곧바로 반환받는 편의 기능이 있다.

Destroy(GameObject) 메서드로 해당 오브젝트를 파괴할 수 있다. 추가 매개변수로 float(초)를 넣는 것으로 파괴를 예약할 수 있다.

## 오브젝트 풀 패턴

오브젝트의 동적 할당과 해제를 반복하면 금세 가비지 컬렉터의 작동이 필요해진다. 가비지 컬렉터는 프로그램 전체를 동결시키고 작동하므로 게임 플레잉중의 가비지 컬렉터 작동은 치명적이다.  
하지만 게임에서 각종 투사체와 같은 다양한 오브젝트가 나타났다 사라지는것은 필수불가결이기다. 따라서 오브젝트의 생성과 파괴를 하지 않고 오브젝트의 출현과 소멸을 구현할 필요가 있다.

오브젝트 풀 패턴은 이러한 문제를 우회해서 해결하는 방법이다.

1. 출현과 소멸이 잦을 오브젝트를 미리 비활성화 상태로 충분히 생성해두고,
1. 대여의 형태로 출현 및 활성화 시키고
1. 반납의 형태로 소멸 및 비활성화 시키는 방법이다.

### 주의사항

오브젝트를 미리 생성해두는 방법인 만큼, 과도하게 오브젝트 풀 패턴을 적용하거나 필요 이상으로 많은 오브젝트를 생성해 두는것은 역효과를 일으킨다.

### 추가

오브젝트 풀 패턴은 더이상 사용하지 않는 오브젝트의 발생을 줄일 뿐만 아니라, 총알과 같은 오브젝트가 메모리에 흩어져서 생성되고 해제될 때 발생하기 쉬운 **메모리 단편화 현상** 또한 예방해준다. 따라서 적절하게 사용하기만 한다면 가비지 컬렉터를 사용하는 C# 뿐만 아니라 여타 언어에서도 유효할 것으로 생각한다.
